<!DOCTYPE html>
<!--[if IE]><![endif]-->
<html>
  
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Terraform Export </title>
    <meta name="viewport" content="width=device-width">
    <meta name="title" content="Terraform Export ">
    <meta name="generator" content="docfx 2.58.9.0">
    
    <link rel="shortcut icon" href="../favicon.ico">
    <link rel="stylesheet" href="../styles/docfx.vendor.css">
    <link rel="stylesheet" href="../styles/docfx.css">
    <link rel="stylesheet" href="../styles/main.css">
    <meta property="docfx:navrel" content="../toc.html">
    <meta property="docfx:tocrel" content="toc.html">
    
    
    
  </head>
  <body data-spy="scroll" data-target="#affix" data-offset="120">
    <div id="wrapper">
      <header>
        
        <nav id="autocollapse" class="navbar navbar-inverse ng-scope" role="navigation">
          <div class="container">
            <div class="navbar-header">
              <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
              </button>
              
              <a class="navbar-brand" href="../index.html">
                <img id="logo" class="svg" src="../logo.svg" alt="">
              </a>
            </div>
            <div class="collapse navbar-collapse" id="navbar">
              <form class="navbar-form navbar-right" role="search" id="search">
                <div class="form-group">
                  <input type="text" class="form-control" id="search-query" placeholder="Search" autocomplete="off">
                </div>
              </form>
            </div>
          </div>
        </nav>
        
        <div class="subnav navbar navbar-default">
          <div class="container hide-when-search" id="breadcrumb">
            <ul class="breadcrumb">
              <li></li>
            </ul>
          </div>
        </div>
      </header>
      <div role="main" class="container body-content hide-when-search">
        
        <div class="sidenav hide-when-search">
          <a class="btn toc-toggle collapse" data-toggle="collapse" href="#sidetoggle" aria-expanded="false" aria-controls="sidetoggle">Show / Hide Table of Contents</a>
          <div class="sidetoggle collapse" id="sidetoggle">
            <div id="sidetoc"></div>
          </div>
        </div>
        <div class="article row grid-right">
          <div class="col-md-10">
            <article class="content wrap" id="_content" data-uid="">
<h1 id="terraform-export">Terraform Export</h1>

<p><span style="color: red"><strong>Highly experimental!</strong></span></p>
<h2 id="disclaimer">Disclaimer</h2>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>
<p>Basically, if you damage an existing production system by applying terraform configuration generated by this tool, that is your problem. <span style="color: red">This tool serves as an <em>aid</em> in migrating a CloudFormation stack to Terraform, <em>not a de-facto solution</em></span>.</p>
<p>You are strongly advised to deploy a copy of a production stack elsewhere, export that, then manually edit the configuration generated by this tool and apply to your test stack until you obtain the desired results, then follow your internal change control process before turning loose on a live production stack (you do have a change control process, right?).</p>
<h2 id="prerequisites">Prerequisites</h2>
<p>To use this cmdlet, you must have the Terraform CLI installed and able to be found in the path. See the <a href="https://www.terraform.io/downloads.html">Terraform downloads</a> page. If the CLI binary cannot be located, the cmdlet exits with an error.</p>
<h2 id="about">About</h2>
<p>Given a scenario where your organisation has dictated that all native CloudFormation stacks should be migrated to Terraform, this cmdlet goes some way to easing the pain of that operation. Currently <a href="https://www.terraform.io/docs/cli/import/index.html">terraform import</a> does not generate <a href="https://www.terraform.io/docs/language/index.html">HCL</a> code for imported resources, only state information leaving the user to work out and add in all the attributes for every imported resource.</p>
<p>The <a class="xref" href="../cmdlets/Export-PSCFNTerraform.html">Export-PSCFNTerraform</a> cmdlet will read a CloudFormation Stack via the AWS CloudFormation Service and make a best attempt at generating HCL for the resources the stack contains. Additionally it will try to fix up dependencies between these resources, input variables (stack parameters) and output values as best it can. Thus the amount of work to be done in getting the HCL for the stack correct is greatly reduced.</p>
<p>The general procedure for migrating a CloudFormation Stack is as follows</p>
<ol>
<li>Run <a class="xref" href="../cmdlets/Export-PSCFNTerraform.html">Export-PSCFNTerraform</a> on the stack, and make manual corrections. Test deploy your terraform stack to another environment/region/account until you're sure it's correct.</li>
<li>Edit the CloudFormation Template and set a <code>DeletionPolicy</code> of <code>Retain</code> on all resources. Update the stack and ensure that this gets applied. In some cases you might need to force a resource update to one resouce (e.g. add a tag) for these policies to be applied.</li>
<li>Delete the CloudFormation Stack. The stack definition will be removed from CloudFormation, however the resouces it contains will not.</li>
<li>Now the stack resources are wholly owned by Terraform.</li>
</ol>
<h2 id="more-details">More Details</h2>
<ul>
<li>Read about various <a class="xref" href="terraform/caveats.html">caveats here</a>.</li>
<li>See the <a class="xref" href="terraform/workflow.html">export workflow</a>.</li>
<li>Examples
<ul>
<li><a class="xref" href="terraform/examples/vpc-stack/vpc-stack.html">VPC Stack</a>.</li>
<li><a class="xref" href="terraform/examples/lambda-stack/lambda-stack.html">Lambda Stack</a>.</li>
</ul>
</li>
</ul>
<h2 id="future-improvements">Future Improvements</h2>
<ul>
<li>Increase the number of mapped resources.</li>
<li>Make the exporter recursive through nested stacks, producing a Terraform module for each nested stack.</li>
<li>Learn GoLang and become a contributor to the Terraform AWS provider 😁</li>
</ul>
</article>
          </div>
          
          <div class="hidden-sm col-md-2" role="complementary">
            <div class="sideaffix">
              <div class="contribution">
                <ul class="nav">
                  <li>
                    <a href="https://github.com/fireflycons/PSCloudFormation/blob/master/docfx/articles/terraform-export.md/#L1" class="contribution-link">Improve this Doc</a>
                  </li>
                </ul>
              </div>
              <nav class="bs-docs-sidebar hidden-print hidden-xs hidden-sm affix" id="affix">
                <h5>In This Article</h5>
                <div></div>
              </nav>
            </div>
          </div>
        </div>
      </div>
      
      <footer>
        <div class="grad-bottom"></div>
        <div class="footer">
          <div class="container">
            <span class="pull-right">
              <a href="#top">Back to top</a>
            </span>
            
            <span>Generated by <strong>DocFX</strong></span>
          </div>
        </div>
      </footer>
    </div>
    
    <script type="text/javascript" src="../styles/docfx.vendor.js"></script>
    <script type="text/javascript" src="../styles/docfx.js"></script>
    <script type="text/javascript" src="../styles/main.js"></script>
  </body>
</html>
